Version 4
SHEET 1 2384 1808
WIRE 48 -304 48 -352
WIRE 240 -272 128 -272
WIRE 416 -272 320 -272
WIRE 48 -192 48 -224
WIRE 48 -192 16 -192
WIRE 272 -192 48 -192
WIRE -256 -144 -256 -176
WIRE 272 -144 272 -192
WIRE -752 -112 -752 -160
WIRE -288 -112 -752 -112
WIRE -128 -112 -128 -176
WIRE -128 -112 -224 -112
WIRE -48 -112 -128 -112
WIRE 128 -112 128 -272
WIRE 128 -112 16 -112
WIRE 240 -112 128 -112
WIRE 416 -112 416 -272
WIRE 416 -112 304 -112
WIRE 512 -112 512 -160
WIRE 512 -112 416 -112
WIRE 592 -112 512 -112
WIRE 736 -112 736 -176
WIRE 736 -112 672 -112
WIRE 736 -96 736 -112
WIRE -752 -80 -752 -112
WIRE 272 -16 272 -80
WIRE 384 -16 272 -16
WIRE -256 0 -256 -80
WIRE 736 0 736 -32
WIRE 48 64 48 -192
WIRE 272 64 48 64
WIRE -752 80 -752 0
WIRE 272 96 272 64
WIRE 48 128 48 64
WIRE 128 128 128 -112
WIRE 240 128 128 128
WIRE 416 128 416 -112
WIRE 416 128 304 128
WIRE -176 208 -176 176
WIRE 48 224 48 192
WIRE 48 224 16 224
WIRE 272 224 272 160
WIRE 272 224 48 224
WIRE 384 224 384 -16
WIRE 384 224 272 224
WIRE 48 256 48 224
WIRE -176 320 -176 288
WIRE 48 368 48 336
WIRE -544 384 -544 368
WIRE -736 496 -736 464
WIRE -544 496 -544 464
WIRE -640 544 -672 544
WIRE -608 544 -640 544
WIRE 416 560 416 528
WIRE 384 592 336 592
WIRE 496 592 448 592
WIRE -640 624 -640 544
WIRE -544 624 -544 592
WIRE -544 624 -640 624
WIRE -736 656 -736 592
WIRE -544 656 -544 624
WIRE -640 704 -672 704
WIRE -608 704 -640 704
WIRE 416 704 416 624
WIRE -432 752 -432 720
WIRE -736 784 -736 752
WIRE -640 784 -640 704
WIRE -640 784 -736 784
WIRE -736 832 -736 784
WIRE -544 864 -544 752
WIRE -320 864 -320 816
WIRE -320 864 -544 864
WIRE 1504 944 1504 928
WIRE 1696 944 1696 928
WIRE -736 976 -736 912
WIRE -640 976 -736 976
WIRE -432 992 -432 976
WIRE -320 992 -320 960
WIRE -160 992 -160 960
WIRE -64 992 -160 992
WIRE 1600 992 1568 992
WIRE 1632 992 1600 992
WIRE -736 1008 -736 976
WIRE -544 1008 -544 864
WIRE -160 1008 -160 992
WIRE -192 1040 -272 1040
WIRE -640 1056 -640 976
WIRE -640 1056 -672 1056
WIRE -608 1056 -640 1056
WIRE 0 1056 -112 1056
WIRE -240 1072 -240 864
WIRE -192 1072 -240 1072
WIRE 1600 1072 1600 992
WIRE 1696 1072 1696 1040
WIRE 1696 1072 1600 1072
WIRE 1504 1104 1504 1040
WIRE 1696 1104 1696 1072
WIRE -144 1120 -144 1104
WIRE -64 1120 -64 992
WIRE -64 1120 -144 1120
WIRE -544 1136 -544 1104
WIRE -544 1136 -640 1136
WIRE -432 1152 -432 1120
WIRE -160 1152 -160 1104
WIRE 1600 1152 1568 1152
WIRE 1632 1152 1600 1152
WIRE -736 1168 -736 1104
WIRE -544 1168 -544 1136
WIRE 1904 1184 1904 1152
WIRE 2112 1184 2112 1152
WIRE -640 1216 -640 1136
WIRE -640 1216 -672 1216
WIRE -608 1216 -640 1216
WIRE 1504 1232 1504 1200
WIRE 1600 1232 1600 1152
WIRE 1600 1232 1504 1232
WIRE 1696 1232 1696 1200
WIRE 1808 1232 1808 1184
WIRE 1808 1232 1696 1232
WIRE 1840 1232 1808 1232
WIRE -432 1264 -432 1232
WIRE -320 1264 -320 1216
WIRE -320 1264 -432 1264
WIRE -272 1264 -320 1264
WIRE -736 1296 -736 1264
WIRE -544 1296 -544 1264
WIRE -432 1296 -432 1264
WIRE -320 1312 -320 1264
WIRE 2112 1328 2112 1264
WIRE 2112 1328 1408 1328
WIRE 1504 1360 1504 1232
WIRE 1696 1360 1696 1232
WIRE -544 1408 -544 1376
WIRE -432 1408 -432 1376
WIRE -320 1408 -320 1376
WIRE 1280 1408 1280 1376
WIRE 1408 1408 1408 1328
WIRE 1440 1408 1408 1408
WIRE 1904 1408 1904 1280
WIRE 1904 1408 1760 1408
WIRE 1968 1408 1904 1408
WIRE 2112 1408 2112 1328
WIRE 2112 1408 2048 1408
WIRE 2224 1408 2224 1360
WIRE 2224 1408 2112 1408
WIRE 2112 1440 2112 1408
WIRE 2224 1456 2224 1408
WIRE 800 1472 704 1472
WIRE 1504 1488 1504 1456
WIRE 1600 1488 1504 1488
WIRE 1696 1488 1696 1456
WIRE 1696 1488 1600 1488
WIRE 704 1504 704 1472
WIRE 1280 1520 1280 1488
WIRE 1376 1520 1280 1520
WIRE 1744 1520 1376 1520
WIRE 800 1552 800 1472
WIRE 800 1552 768 1552
WIRE 832 1552 800 1552
WIRE 1280 1552 1280 1520
WIRE 1600 1552 1600 1488
WIRE 2112 1552 2112 1520
WIRE 2224 1552 2224 1520
WIRE 1904 1568 1904 1408
WIRE 1376 1600 1376 1520
WIRE 1376 1600 1344 1600
WIRE 1536 1600 1376 1600
WIRE 1744 1616 1744 1520
WIRE 1840 1616 1744 1616
WIRE 896 1632 896 1600
WIRE 896 1632 800 1632
WIRE 704 1664 704 1600
WIRE 896 1664 896 1632
WIRE 1280 1680 1280 1648
WIRE 1600 1680 1600 1648
WIRE 1904 1696 1904 1664
WIRE 800 1712 800 1632
WIRE 800 1712 768 1712
WIRE 832 1712 800 1712
WIRE 704 1792 704 1760
WIRE 896 1792 896 1760
FLAG 496 592 OUT_FB
FLAG 416 704 0
FLAG 416 528 VCC33
FLAG -176 320 0
FLAG -176 176 VCC33
FLAG 736 0 0
FLAG 736 -176 ANT
FLAG 512 -160 DRIVE
FLAG -752 80 0
FLAG -752 -160 DRVIN
FLAG -128 -176 DRVINBUF
FLAG -544 368 VCC33
FLAG 48 368 0
FLAG -736 1296 SNSN
FLAG -736 464 SNSP
FLAG -432 720 VCC33
FLAG -544 1408 0
FLAG -432 992 0
FLAG -320 992 0
FLAG -320 816 SENSE
FLAG 16 224 SNSN
FLAG 16 -192 SNSP
FLAG 48 -352 VCC33
FLAG 0 1056 OUT_SENSE
FLAG 336 592 DRIVE
FLAG -256 0 0
FLAG -256 -176 VCC33
FLAG -160 1152 0
FLAG -160 960 VCC33
FLAG -432 1120 VCC33
FLAG -432 1408 0
FLAG -320 1408 0
FLAG -320 1216 VREF
FLAG 704 1792 0
FLAG 896 1792 0
FLAG 1504 928 VCC33
FLAG 1696 928 VCC33
FLAG 1600 1680 0
FLAG 1280 1680 0
FLAG 1280 1376 VCC33
FLAG 1904 1696 0
FLAG 1904 1152 VCC33
FLAG 2112 1152 VCC33
FLAG 2112 1552 0
FLAG 2224 1552 0
FLAG 2224 1360 VREF
FLAG 1808 1184 SENSE
SYMBOL 74LVC1GU04.asy 416 592 R0
SYMATTR InstName U2
SYMBOL Voltage -176 192 R0
SYMATTR InstName V3
SYMATTR Value 3.3
SYMBOL ind 576 -96 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 2mH
SYMATTR SpiceLine Rser=120 Cpar=1pF
SYMBOL Cap 720 -96 R0
SYMATTR InstName C_ant
SYMATTR Value 10pF
SYMBOL Voltage -752 -96 R0
SYMATTR InstName V4
SYMATTR Value PULSE(0.1 3.2 0 10n 10n 456n 932n)
SYMBOL 74LVC1GU04.asy 272 -112 R0
SYMATTR InstName U4
SYMBOL Res 336 -288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 200k
SYMBOL Cap 16 -128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 22p
SYMBOL 74LVC1GU04.asy 272 128 R0
SYMATTR InstName U5
SYMBOL Res 32 240 R0
SYMATTR InstName R4
SYMATTR Value 2
SYMBOL Res -560 368 R0
SYMATTR InstName R5
SYMATTR Value 4.7
SYMBOL Cap 32 128 R0
SYMATTR InstName C4
SYMATTR Value 100n
SYMBOL pnp -672 592 R180
WINDOW 0 60 32 Left 2
WINDOW 3 58 66 Left 2
SYMATTR InstName Q1
SYMATTR Value BC857B
SYMBOL pnp -608 592 M180
WINDOW 0 64 34 Left 2
WINDOW 3 61 68 Left 2
SYMATTR InstName Q2
SYMATTR Value BC857B
SYMBOL pnp -672 752 R180
WINDOW 0 60 32 Left 2
WINDOW 3 58 66 Left 2
SYMATTR InstName Q3
SYMATTR Value BC857B
SYMBOL pnp -608 752 M180
WINDOW 0 64 34 Left 2
WINDOW 3 61 68 Left 2
SYMATTR InstName Q4
SYMATTR Value BC857B
SYMBOL npn -672 1168 M0
SYMATTR InstName Q5
SYMATTR Value BC847B
SYMBOL npn -608 1168 R0
SYMATTR InstName Q6
SYMATTR Value BC847B
SYMBOL npn -672 1008 M0
SYMATTR InstName Q7
SYMATTR Value BC847B
SYMBOL npn -608 1008 R0
SYMATTR InstName Q8
SYMATTR Value BC847B
SYMBOL Res -752 816 R0
SYMATTR InstName R6
SYMATTR Value 470
SYMBOL Res -560 1280 R0
SYMATTR InstName R7
SYMATTR Value 4.7
SYMBOL Res -448 880 R0
SYMATTR InstName R8
SYMATTR Value 47k
SYMBOL Res -448 736 R0
SYMATTR InstName R9
SYMATTR Value 47k
SYMBOL Cap -336 896 R0
SYMATTR InstName C5
SYMATTR Value 10p
SYMBOL Res 32 -320 R0
SYMATTR InstName R10
SYMATTR Value 2
SYMBOL 74LVC1GU04.asy -256 -112 R0
SYMATTR InstName U8
SYMBOL adcmp601.asy -160 1056 R0
SYMATTR InstName A1
SYMBOL Res -448 1280 R0
SYMATTR InstName R2
SYMATTR Value 47k
SYMBOL Res -448 1136 R0
SYMATTR InstName R11
SYMATTR Value 47k
SYMBOL Cap -336 1312 R0
SYMATTR InstName C2
SYMATTR Value 1n
SYMBOL pnp 1568 1040 R180
WINDOW 0 60 32 Left 2
WINDOW 3 58 66 Left 2
SYMATTR InstName Q9
SYMATTR Value BC857B
SYMBOL pnp 1632 1040 M180
WINDOW 0 64 34 Left 2
WINDOW 3 61 68 Left 2
SYMATTR InstName Q10
SYMATTR Value BC857B
SYMBOL pnp 1568 1200 R180
WINDOW 0 60 32 Left 2
WINDOW 3 58 66 Left 2
SYMATTR InstName Q11
SYMATTR Value BC857B
SYMBOL pnp 1632 1200 M180
WINDOW 0 64 34 Left 2
WINDOW 3 61 68 Left 2
SYMATTR InstName Q12
SYMATTR Value BC857B
SYMBOL npn 768 1664 M0
SYMATTR InstName Q13
SYMATTR Value BC847B
SYMBOL npn 832 1664 R0
SYMATTR InstName Q14
SYMATTR Value BC847B
SYMBOL npn 768 1504 M0
SYMATTR InstName Q15
SYMATTR Value BC847B
SYMBOL npn 832 1504 R0
SYMATTR InstName Q16
SYMATTR Value BC847B
SYMBOL npn 1440 1360 R0
SYMATTR InstName Q17
SYMATTR Value BC847B
SYMBOL npn 1760 1360 M0
SYMATTR InstName Q18
SYMATTR Value BC847B
SYMBOL npn 1536 1552 R0
SYMATTR InstName Q19
SYMATTR Value BC847B
SYMBOL npn 1344 1552 M0
SYMATTR InstName Q20
SYMATTR Value BC847B
SYMBOL Res 1264 1392 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL npn 1840 1568 R0
SYMATTR InstName Q21
SYMATTR Value BC847B
SYMBOL npn 1840 1184 R0
SYMATTR InstName Q22
SYMATTR Value BC847B
SYMBOL Res 2096 1424 R0
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL Res 2096 1168 R0
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL Cap 2208 1456 R0
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL Res 2064 1392 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 100
TEXT 256 408 Left 3 ;Ref Drive: output buffer
TEXT -296 376 Left 2 !.tran 0 2.1m 0n 1n
TEXT 512 -248 Left 2 !.ic I(L1)=0.001u
TEXT -800 176 Left 3 ;Current mirror based\ncurrent sensor with integrator\n(adds 90 degrees phase shift)
TEXT -200 824 Left 3 ;Sense sine to square \ncomparator
TEXT -704 -472 Left 5 ;Current Sensing Analog Front End for D-Lev Theremin
